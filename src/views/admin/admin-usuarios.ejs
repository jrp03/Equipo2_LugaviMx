<% layout('adminLayout') %>

<div class="container mt-5">
  <h2 class="mb-4">Gesti√≥n de Usuarios</h2>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Email</th>
        <th>Rol</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <% usuarios.forEach(usuario => { %>
        <tr>
          <td><%= usuario.name %></td>
          <td><%= usuario.email %></td>
          <td><%= usuario.role %></td>
          <td>
            <form action="/admin/usuarios/<%= usuario._id %>/rol" method="POST" class="d-inline">
              <select name="nuevoRol" class="form-select d-inline w-auto">
                <option value="usuario" <%= usuario.role === 'usuario' ? 'selected' : '' %>>Usuario</option>
                <option value="admin" <%= usuario.role === 'admin' ? 'selected' : '' %>>Administrador</option>
              </select>
              <button type="submit" class="btn btn-sm btn-primary ms-2">Actualizar</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
