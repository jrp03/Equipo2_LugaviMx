<% layout('layout/adminLayout') %>

<div class="container mt-5">
  <h2 class="mb-4 text-center">Pedidos de <%= usuario.name %></h2>

  <% if (pedidos.length === 0) { %>
    <div class="alert alert-info text-center">Este usuario no tiene pedidos registrados.</div>
  <% } else { %>
    <div class="table-responsive">
      <table class="table table-bordered table-hover bg-white shadow-sm text-center">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Fecha</th>
            <th>Monto</th>
            <th>Estado</th>
          </tr>
        </thead>
        <tbody>
          <% pedidos.forEach(p => { %>
            <tr>
              <td><%= p._id %></td>
              <td><%= new Date(p.createdAt).toLocaleString() %></td>
              <td>$<%= p.total.toFixed(2) %></td>
              <td><span class="badge bg-info text-dark"><%= p.estado %></span></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% } %>

  <div class="text-center mt-4">
    <a href="/admin/usuarios" class="btn btn-secondary">Volver a la lista de usuarios</a>
  </div>
</div>
